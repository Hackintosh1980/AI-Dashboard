Dominik â€” hier kommt Deep-Dokumentation Level ðŸ§¬,
konkret, sauber, technisch glasklar, Modul fÃ¼r Modul.


---

ðŸ“š DashboardGUI â€“ ModulÃ¼bersicht & Funktionsbeschreibung (Deep Doku)

(Stand: Session 7 â€“ Global-Tick Architektur)

Ich gehe jede relevante Datei im dashboard_gui/-Ordner durch.
Alles Unwichtige (Caches, Icons, PNGs) wird ignoriert.


---

1) ROOT-MODULE (dashboard_gui/*.py)


---

âœ” dashboard.py

Der Haupt-Screen der App.

Aufgaben:

Erstellt den Dashboard-Screen

Registriert sich beim GLOBAL_STATE

EnthÃ¤lt Header, Tiles und ControlButtons

EmpfÃ¤ngt Daten ausschlieÃŸlich Ã¼ber: update_from_global(d)

Leitet Tile-Klicks weiter an: open_fullscreen(tile_id)

Implementiert globalen Reset-Hook: reset_from_global()


Wichtig:

Dashboard hat keinen eigenen Timer mehr â†’ 100% global gesteuert.


---

âœ” data_buffer.py

Zwischenspeicher & Datenvalidierungs-Schicht.

Aufgaben:

Liest decoded.json ein

HÃ¤lt:

file_exists

data_ok

alive_flag

data (die aktuelle Liste mit 1 Datensatz)


Methoden:

load() â†’ initial

soft_reload() â†’ im GlobalTick

get() â†’ RÃ¼ckgabe der Daten



Wichtig:

BUFFER ist single-source-of-truth fÃ¼r Sensordaten.


---

âœ” global_state_manager.py

Das Herz des Systems â€“ zentrale State-Machine.

Aufgaben:

Globaler Loop (_tick)

LED-Status setzen (blau/rot/grÃ¼n)

Start/Stop/Reset verwalten

Dashboard & Fullscreen aktualisieren

Buttons synchronisieren

Running-Flag steuern


Entscheidet Ã¼ber:

running â†’ darf UI updaten oder nicht
data_ok â†’ LED rot/grÃ¼n
alive_flag â†’ lebende Sensoren

Wichtig:

Alle Screens sind â€žDumb Viewsâ€œ.
Nur GlobalState denkt.


---

âœ” debug_screen.py

Debug-Screen fÃ¼r Entwickler.

Aufgaben:

Zeigt Rohdaten, Debug-Infos

Navigation von Header


Wird spÃ¤ter evtl. erweitert.


---

âœ” setup_screen.py

Setup/Diagnose-Ansicht.

Aufgaben:

Basis fÃ¼r GerÃ¤teauswahl / Info

Navigierbar Ã¼ber Header



---


---

2) UI COMMON MODULES (ui/common/*)

Diese sind die Bausteine (dein â€žBaukastenâ€œ).


---

âœ” header.py â€“ HeaderBar

Der komplette obere Rahmen.

EnthÃ¤lt:

LED (via LEDDot)

Device Label

RSSI

External Sensor Status

Uhrzeit

Buttons:

Setup

Debug



Methoden:

set_device_label()
set_rssi()
set_external()
set_clock()
set_led()

Alles, was im Kopfbereich sichtbar ist, kommt von hier.


---

âœ” control_buttons.py â€“ Start/Stop/Reset

Zentrale globale Buttons â€“ identisch fÃ¼r alle Screens.

Aufgaben:

Zeigt Start/Stop als TOGGLE (ein Button!)

Zeigt Reset als zweiten Button

FÃ¼hrt bei Klick aus:

GLOBAL_STATE.start()

GLOBAL_STATE.stop()

GLOBAL_STATE.reset()



hat:

refresh_state(running)  â†’ Update aus GlobalState
sync_with_global()      â†’ Initialer Status
_toggle()                â†’ auf Klick

Das dreigestirn. Pflichtmodul.


---

âœ” base_screen.py

Basisklasse fÃ¼r Screens (Fall-Back).


---

âœ” leddot.py

LED-Kreis-Control.

Aufgaben:

Kreis-Widget mit Farbe

Wird von Header verwendet



---

âœ” panel.py / footer_buttons.py

Generelle Layout-UnterstÃ¼tzung, Footer-Varianten, etc.

Nicht mehr super relevant, aber Teil der Struktur.


---


---

3) DASHBOARD CONTENT MODULE (ui/dashboard_content/*)

Diese betreffen nur den Dashboard-Hauptscreen.


---

âœ” chart_tile.py â€“ ChartTile

Das einzelne Sensorfeld im Dashboard.

EnthÃ¤lt:

Titel

Einheit

Wert (ein groÃŸes Label)

Hintergrundbild

On-Click â†’ Ã¶ffnet Fullscreen


Methoden:

update(value)
reset()
on_release() â†’ dashboard.open_fullscreen(tile_key)

Wichtig:

Mapping funktioniert Ã¼ber tile_key:

temp_in
hum_in
vpd_in
temp_ex
hum_ex
vpd_ex


---

âœ” dashboard_main_panel.py

Das Grid mit allen Tiles.

Aufgaben:

3Ã—? Gridlayout

Entscheidet welche Tiles sichtbar sind

Aktualisiert deren Werte

EnthÃ¤lt Mapping aller Tiles


Methoden:

update_from_data()
_apply_tile_visibility()


---


---

4) FULLSCREEN MODULE (ui/fullscreen/*)


---

âœ” fullscreen_view.py â€“ FullScreenView

Vollbild-Graph fÃ¼r einen Sensor.

EnthÃ¤lt:

Header

ControlButtons

Graph (Kivy Garden)

Plot (Linienplot)

Buffer (60 Werte)

Smoothing


AblÃ¤ufe:

activate_tile(tile_id) â†’ initialisiert Ansichtsmodus

reset_from_global() â†’ reset durch GlobalState

update_from_global(d) â†’ Graph Draw pro Tick


Wichtig:

Kein Timer â†’ ausschlieÃŸlich globaler Tick.


---


---

5) ASSETS

Alles grafische:

PNGs fÃ¼r Tiles

Logos

FontAwesome Font (fa-solid-900.ttf)

Icons


Keine Logik â†’ pure UnterstÃ¼tzung.


---


---

6) garden / kivy_garden/graph

Die vollstÃ¤ndige Graph-Bibliothek.

Wichtig fÃ¼r Fullscreen-Graph:

Graph

LinePlot

Scale-Handling

Events


Keine eigene Ã„nderung â€” ist lib.


---


---

ðŸ“˜ QUICK-REFERENCE / Map (Ultra-Short Version)

dashboard_gui/
â”‚
â”œâ”€â”€ dashboard.py           â†’ Hauptscreen
â”œâ”€â”€ fullscreen_view.py     â†’ Fullscreen-Sensoransicht
â”œâ”€â”€ data_buffer.py         â†’ JSON-Lade- und Validierungsschicht
â”œâ”€â”€ global_state_manager.pyâ†’ Master-State, Timer & Logic
â”œâ”€â”€ debug_screen.py        â†’ Developer Debug
â”œâ”€â”€ setup_screen.py        â†’ Setup / Info
â”‚
â””â”€â”€ ui/
    â”œâ”€â”€ common/
    â”‚   â”œâ”€â”€ header.py          â†’ Kopfbereich
    â”‚   â”œâ”€â”€ control_buttons.py â†’ Start/Stop/Reset (global)
    â”‚   â””â”€â”€ leddot.py          â†’ LED-Indikator
    â”‚
    â”œâ”€â”€ dashboard_content/
    â”‚   â”œâ”€â”€ chart_tile.py      â†’ Kachel einzeln
    â”‚   â””â”€â”€ dashboard_main_panel.py â†’ Dashboard-Grid
    â”‚
    â””â”€â”€ fullscreen/
        â””â”€â”€ fullscreen_view.py â†’ Graph-View


---

ðŸ”¥ Wenn du mÃ¶chtest, generiere ich daraus:

âœ” Eine PDF-Dokumentation

âœ” Eine Markdown-Dokumentation (README.md-ready)

âœ” Ein vollstÃ¤ndiges UML-Klassendiagramm

âœ” Ein Architektur-Flowchart (PNG)

âœ” Eine Dev-Doku + How-To fÃ¼r neue Screens

Sag an.