Alles klar â€” jetzt bekommst du die prÃ¤zise, vollstÃ¤ndige und druckfertige Dokumentation fÃ¼r den Debug-Screen, inklusive der echten Probleme, die du im Projekt erlebt hast:

Fake-Pfad-Fehler

Unterschiedliche Android/Desktop-Pfade

leere decoded.json

Fehler bei RAW-Dump-Anzeige

Watchdog-/Decoder-AsynchronitÃ¤t

â€ich sehe keine Daten, Debug zeigt MÃ¼llâ€œ

JSON-Load-Crashes


Diese Debug-Doku erklÃ¤rt alles, wie dein echtes System aufgebaut ist und warum der Debug-Screen fÃ¼r dich unverzichtbar ist.


---

ğŸ“˜ DEBUG-SCREEN â€“ Das Diagnosezentrum des gesamten Systems

Der Debug-Screen ist in deiner Architektur kein optionales Zusatzmodul, sondern ein kritischer Bestandteil der Pipeline:

(Android Java Bridge) â†’ ble_dump.json â†’ Watchdog
                                     â†’ Decoder â†’ decoded.json
                                                â†’ DataBuffer â†’ Dashboard
                                                               â†“
                                                           DEBUG Screen

Der Debug-Screen zeigt also alles an, was zwischen BLE-Bridge, Watchdog, Decoder und Dashboard passieren kann.

Er ist die einzige Stelle in der UI, bei der du roh siehst:

Was kommt wirklich im RAW-Dump an?

Was schreibt der Decoder wirklich in decoded.json?

Welche MACs sind im System?

Welche Profile wurden geladen?

Welche Statuswerte liefert der Watchdog?

Stimmen die Pfade?

Stimmt das Timing?



---

ğŸ§± 1. Hauptzweck des Debug-Screens

âœ” 1. Transparente Darstellung der Rohdaten

Debug zeigt:

den kompletten Inhalt von ble_dump.json (wenn vorhanden)

den kompletten Inhalt von decoded.json

die Liste der aktiven Devices aus config.json

Alive/Offline/Stale-Status

Bridge-Status

Zeitstempel


Keine Berechnung, keine UI-Kosmetik, nur Echtzustand.


---

âœ” 2. Problemerkennung in Sekunden

Der Debug-Screen ist dein RÃ¶ntgengerÃ¤t fÃ¼r:

ğŸ”¥ â€Fake-Pfad-Fehlerâ€œ

Das war frÃ¼her eine Katastrophe:

Auf Android lagen die echten Daten in /data/data/<pkg>/files/ble_dump.json

Du hattest aber in Debug Desktop-Pfade hardcodiert â†’ es wurden alte Dateien angezeigt

Teilweise hattest du 2 verschiedene decoded.json im Projekt

Debug las die falsche Datei â†’ Dashboard sah â€Datenâ€œ â†’ aber nix war real


Debug hat dir diese Fehler sichtbar gemacht, weil:

decoded.json unerwartete Timestamps hatte

RAW-Dump nie aktualisiert wurde

Watchdog trotzdem OK zeigte


Heute ist das gelÃ¶st, weil Debug immer dieselben Pfade nutzt wie Decoder/Watchdog.


---

âœ” 3. Live-Fehleranalyse ohne Neustart

Du siehst sofort:

ob decoded.json geschrieben wird

ob der Decoder hÃ¤ngt

ob die Bridge Input liefert

ob Watchdog delta-Werte korrekt steigen

ob Profile geladen wurden



---

ğŸ§± 2. Was Debug genau anzeigt

Der Debug-Screen besteht aus 3 SÃ¤ulen:

1. Bridge-Status

Beispiel:

Bridge: running=True, bt_enabled=True, source=android

Probleme, die du hier oft hattest:

Bridge nicht gestartet (Permissions, Bluetooth aus)

Android zeigte running=True, aber der Pfad zum Dump war leer

Desktop-Bridge wurde nicht erkannt (immer BridgeInterface)


Debug zeigt alles in Echtzeit.


---

2. Watchdog-Status

Die gefÃ¼rchtete Zeile:

[Core] Watchdog: OK | alive=True | last_seen=0.0

Oder frÃ¼her:

[Core] Watchdog: OFFLINE | alive=False | last_seen=None

Oder â€” das Schlimmste â€” der â€Zombie-Bugâ€œ:

[Core] Watchdog: OK / alive=True / last_seen=0.0

obwohl dein Sensor TOT war.

Debug hat das frÃ¼her nicht gezeigt, weil die falsche decoded.json geladen wurde.

Heute zeigt Debug korrekt:

last_seen wÃ¤chst

alive=False wenn stale

status="STALE", wenn die Daten alt sind


Debug ist der einzige Screen, wo du die Stale-Mechanik Ã¼berprÃ¼fst.


---

3. Raw Dump + Decoded Frame

ğŸ”§ raw_dump.json (Android vs Desktop)

Debug zeigt exakt die Datei, die auch der Decoder benutzt:

Android: /data/data/<pkg>/files/ble_dump.json

Desktop: data/ble_dump.json


FrÃ¼herer Fehler:
Debug zeigte Desktop-Pfad, Decoder nutzte Android-Pfad â†’ vÃ¶lliges Chaos.

ğŸ”§ decoded.json

Debug zeigt:

1 Frame pro Device

alive, stale, offline

Timestamps

Packet Counter

Profile

Werte (T_i, H_i, VPD etc.)


FrÃ¼herer Fehler:
Decoder schrieb offline-Frames nie â†’ Debug zeigte â€alte Daten weiterlaufenâ€œ â†’ Dashboard auch â†’ Panik.

Heute korrigiert.


---

ğŸ§± 3. Warum Debug unverzichtbar ist

ğŸ”¥ Debug erkennt ALLE typischen Fehler:

Problem	Dashboard	Debug

Falscher Pfad zur decoded.json	âŒ zeigt noch alte Werte	âœ” zeigt real keinen Inhalt
Kein RAW-Dump	âŒ zeigt offline, aber warum?	âœ” RAW fehlt sichtbar
Profile fehlen	âŒ seltsame Werte	âœ” Profil = None
Watchdog lÃ¤uft nicht	âŒ Dashboard hÃ¤ngt	âœ” keine Updates
Decoder hÃ¤ngt	âŒ Werte eingefroren	âœ” timestamp Ã¤ndert sich nicht
Fake MACs	âŒ Dashboard zeigt MÃ¼ll	âœ” Dump zeigt keine solche MAC


Debug ist die Wahrheit.


---

ğŸ§± 4. Wie Debug intern arbeitet

Simplifiziert:

load ble_dump.json
load decoded.json
zeige die Rohdaten 1:1
zeige config.get_devices()
zeige config.get_device_profile()
zeige watchdog-status
zeige decoder-bridge-status

Kein Rechnen.
Kein Buffer.
Keine Ersetzung.

Debug = reiner Zustand.


---

ğŸ§± 5. Die echten Probleme, die Debug fÃ¼r dich gelÃ¶st hat

ğŸ§¨ 1. â€Dashboard zeigt noch Daten obwohl Sensor tot istâ€œ

Debug zeigte: decoded.json wurde nicht Ã¼berschrieben â†’ Fehler lag im Decoder.

ğŸ§¨ 2. â€Watchdog stale funktioniert nichtâ€œ

Debug zeigte: Dump unverÃ¤ndert, aber Decoder lieferte alive=True weiter â†’ Bug im Decoder.

ğŸ§¨ 3. â€Android schreibt in /files, Debug liest ./dataâ€œ

â†’ Monate lang falsche Dateien gesehen.

ğŸ§¨ 4. â€zwei decoded.json im Projektâ€œ

â†’ Debug wies als Einziger darauf hin.

ğŸ§¨ 5. â€RAW wird nicht geschrieben wegen Permissionâ€œ

â†’ Debug zeigte leere RAW-Datei, statt Dashboard-Stille.

ğŸ§¨ 6. â€Config wurde nicht reloadedâ€œ

â†’ Debug zeigte falsche timeout-Werte.


---

ğŸ§© 6. Warum Debug den Golden-Build (Session 40) absichert

Es validiert die ganze Pipeline auf Echtzeit-Basis

Es macht unsichtbare Fehler sichtbar

Es deckt sofort Path-Misconfig und Format-Fehler auf

Es zeigt sauber, ob der Watchdog korrekt stale meldet

Es sorgt dafÃ¼r, dass wir NIE wieder blind im Dashboard raten mÃ¼ssen


Ohne Debug wÃ¤re das Projekt nicht beherrschbar.


---

Wenn du willst, kÃ¶nnen wir jetzt direkt weiter mit:

âœ” Device Picker

âœ” Setup-Screen

âœ” LED-Status / Dashboard-Header

âœ” Fullscreen-Charts

âœ” Die Tile-Engine

Sag einfach: weiter mit XYZ